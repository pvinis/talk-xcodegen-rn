import { Notes, Head, Footer, Appear, Split, useDeck } from 'mdx-deck'
import { Grid, Box, Link, Flex, Styled } from 'theme-ui'

import { Counter } from './components/Counter'
import { AboveFooter } from './components/AboveFooter'
import { myTheme } from './theme'

import { myFace2, diff1, diff2, diff3, xcode1 } from "./images"

export const theme = myTheme


<Head>
	<link href="https://pvinis.github.io/iosevka-webfont/3.4.1/iosevka.css" rel="stylesheet" />
</Head>


<Footer>

<Flex sx={{
	position: 'absolute',
	left: 0,
	right: 0,
	bottom: 0,
	height: 40,
	borderTop: `${theme.colors.accent} solid 1px`,
	flexDirection: "row",
	alignItems: 'center',
	justifyContent: "space-around",
}}>

<Counter />

React Native EU 2020

Pavlos Vinieratos

@pvinis

</Flex>

</Footer>


# Xcode complexity? No more.

## with Pavlos Vinieratos

#### React Native EU @ your screen, your house

#### August 2020

<Notes>

second talk, thanks to RN EU again!

</Notes>

---

<Split>

<img src={myFace2} />

I'm `Pavlos`,

aka `pvinis` on everything online.

I enjoy using and improving `React Native`.

</Split>

---

`Xcode` is a struggle for many.

Especially coming from `web` or `native Android`.

---

### Why

- It's an `unknown`/`unfamilar` tool.
- Almost all settings need to be edited `using Xcode UI`.
- Its `file format` is not very friendly.

<Notes>
If you have native iOS devs in your team,
probably they know how to handle Xcode and its settings and file diffs,
but it's definitely not as intuitive as `package.json`
</Notes>

---

<AboveFooter>
	<img src={xcode1} />
</AboveFooter>

---

<AboveFooter>
	<img src={diff1} />
</AboveFooter>

---

<AboveFooter>
	<img src={diff2} />
</AboveFooter>

---

<AboveFooter>
	<img src={diff3} />
</AboveFooter>

---

### React Native `Core` and `Community` are working hard.

Besides the many improvments and new features shipped, `tooling` has been getting better too:
- `CocoaPods` was added, making manual `linking` a thing of the past.
- `upgrade-helper` was created, making manual `upgrading` easier.

---

I've had this `idea` for a while:

Wouldn't it be nice if my `Xcode project` was more like `package.json`?

---

`XcodeGen` is here to save the day!

https://github.com/yonaskolb/XcodeGen

---

It can generate an Xcode project from a `project.yml` file.

Imagine `project.yml` is `package.json` and `MyProject.xcodeproj` is `yarn.lock`.

---

Visit https://github.com/pvinis/react-native-xcodegen to get set up.

Steps:
- Install `xcodegen` and `xunique`.
- Copy `make` into your ios dir of your project.
- Find the right project file for your RN version from `templates`.
- Copy into your ios dir of your project and rename to `project.yml`.
- Done. You can now run `./make` from inside `ios` dir to have your Xcode project generated.

<Notes>
the same way you would do with yarn install
</Notes>

---

# Demo

---

### Adding libraries 1/3

`No native` code, nothing changes.

- yarn add ramda

---

### Adding libraries 2/3

`With native` code, tiny change.

<Grid columns={2}>
<Box>

Old way
- yarn add react-native-permissions
- cd ios && `pod install`

</Box>
<Box>

New way
- yarn add react-native-permissions
- cd ios && `./make`

</Box>
</Grid>

https://github.com/pvinis/talk-xcodegen-rn/commit/8940952a5d046ea0ef2db856ed3418e9bcfa91e9

---

### Adding libraries 3/3
Adding native code yourself, simple.

- Create the `native` files `with or without` Xcode
- Make sure they are in the `target`'s `sources` in `project.yml`
- cd ios && `./make`

https://github.com/pvinis/talk-xcodegen-rn/commit/90ff2d1ac34b34ad6b229c9b7b486e9e457f9a78
https://github.com/pvinis/talk-xcodegen-rn/tree/master/code/MyProject/ios/MyProject
https://github.com/pvinis/talk-xcodegen-rn/blob/master/code/MyProject/ios/project.yml

---

### How do I upgrade next time

Look for `updated template` in https://github.com/pvinis/react-native-xcodegen.

Otherwise check the `upgrade-helper` xcodeproj diffs for anything interesting.

https://react-native-community.github.io/upgrade-helper/?from=0.62.2&to=0.63.0
https://github.com/pvinis/talk-xcodegen-rn/commit/286c0f5b7a18b8a2b68db41e44c1702860f94173

---

### Takeaways 1/3

XcodeGen is a great way to keep `complicated` upgrades `simple`.

From https://github.com/react-native-community/upgrade-support/issues/13

To https://github.com/pvinis/talk-xcodegen-rn/commit/286c0f5b7a18b8a2b68db41e44c1702860f94173#diff-5b58604e7164c95a2602ad5b5fab7235

---

### Takeaways 2/3

Read the docs and specs of XcodeGen if you'd like to learn more.

https://github.com/yonaskolb/XcodeGen/tree/master/Docs

---

### Takeaways 3/3

XcodeGen has no way `right now` to generate a project.yml from an existing xcodeproj, but it is being `worked on`.

That means when a new `Xcode setting` is changed, we need to look for the `right yml name` for it.

`Or` grab the `latest template project.yml file` and merge it with any changes we `might already have`.

https://github.com/yonaskolb/XcodeGen/pull/735

https://github.com/pvinis/react-native-xcodegen

---

### Work to be done

- Keep the templates `up-to-date` with the diffs and upgrade-helper
- Make an `RFC` and a `PR` on react-native to add a `project.yml` to the init template

---

- Go set this up for `your project`
- `Try` it out
- Make `issues` for things that might not work for your project

Find me on `twitter`.

---

<Split>

<img src={myFace2} />

## Thank you ðŸ’œ

- [twitter.com/pvinis](https://twitter.com/pvinis) (@ me)
- [p0l.co/talk-xcodegen](https://p0l.co/talk-xcodegen) (this talk)
- [p0l.co/rn-xcodegen](https://p0l.co/rn-xcodegen) (tempate files)
- [artsy.net](https://artsy.net) (where I work)
- [pvin.is](https://pvin.is) (my blog, ðŸš§)
- [pavlos.dev](https://pavlos.dev) (my portfolio, ðŸš§)

</Split>


<!--

- make a PR on react native? we should remove xcodeproj from diffs. after that, or add a comment to just run ./ios/make. also pr for https://github.com/yonaskolb/XcodeGen/blob/master/Docs/Examples.md?
- maybe a package.json script to run the xcodegen thing?

-->
